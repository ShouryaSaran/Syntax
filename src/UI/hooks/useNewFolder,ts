import { useState } from "react";
import type { FileNode } from "../components/data/explorerData";
import explorerData from "../components/data/explorerData";
import useTraverseTree from"./traverse-tree";
import { v4 as uuidv4 } from "uuid";

const useNewFolder = () => {

    const [explorer,setExplorer] = useState<FileNode>(explorerData);
    const {insertNode}= useTraverseTree();

    const handleNewFolder = (folderId:string , e: React.KeyboardEvent<HTMLInputElement>) =>{
        if(e.key === "Escape") return null;
        if(e.key==="Enter" && e.currentTarget.value.trim()){ 
            setExplorer((prev)=> 
                insertNode(prev,folderId,e.currentTarget.value.trim(),"folder"))
        }
    };  

    return handleNewFolder
}

export default useNewFolder;